---
import { Icon } from "astro-icon/components";
---

<header class="fixed top-0 left-0 z-50 bg-background w-full">
  <nav
    class="flex justify-between items-center mx-auto max-w-7xl px-4 font-mono"
  >
    <a class="text-xl font-bold py-4" href="/">#-klpod221</a>

    <ul
      class="hidden md:flex m-0 p-0 fixed z-40 top-16 left-0 bg-background w-full md:w-auto md:static md:flex-row md:space-x-4 md:items-center md:justify-center"
    >
      <li class="p-4 text-center">
        <a class="inline-block relative group" href="#about">
          About
          <span
            class="absolute bottom-0 left-0 w-full h-0.5 bg-primary origin-left transform scale-x-0 transition-transform duration-300 ease-out group-hover:scale-x-100"
          >
          </span>
        </a>
      </li>
      <li class="p-4 text-center">
        <a class="inline-block relative group" href="#experience">
          Experience
          <span
            class="absolute bottom-0 left-0 w-full h-0.5 bg-primary origin-left transform scale-x-0 transition-transform duration-300 ease-out group-hover:scale-x-100"
          >
          </span>
        </a>
      </li>
      <li class="p-4 text-center">
        <a class="inline-block relative group" href="#projects">
          Projects
          <span
            class="absolute bottom-0 left-0 w-full h-0.5 bg-primary origin-left transform scale-x-0 transition-transform duration-300 ease-out group-hover:scale-x-100"
          >
          </span>
        </a>
      </li>
      <li class="p-4 text-center">
        <a class="inline-block relative group" href="#contact">
          Contact
          <span
            class="absolute bottom-0 left-0 w-full h-0.5 bg-primary origin-left transform scale-x-0 transition-transform duration-300 ease-out group-hover:scale-x-100"
          >
          </span>
        </a>
      </li>
    </ul>

    <div class="flex items-center space-x-4">
      <a
        href="https://github.com/klpod221"
        target="_blank"
        rel="noopener noreferrer"
        aria-label="GitHub"
      >
        <Icon name="mdi:github" class="w-6 h-6" />
      </a>

      <button class="md:hidden" aria-label="Toggle menu">
        <Icon name="mdi:menu" class="w-6 h-6" />
      </button>
    </div>
  </nav>
</header>

<script>
  import $ from "jquery";

  const activeHeaderItem = (item) => {
    const $items = $("nav ul li a");
    $items.removeClass("text-primary").find("span").removeClass("scale-x-100");
    $(item).addClass("text-primary").find("span").addClass("scale-x-100");

    const target = $(item).attr("href");
    const $target = $(target);

    if ($target.length) {
      $("html, body").animate(
        { scrollTop: $target.offset().top - 64 },
        "smooth"
      );
    } else {
      $("html, body").animate({ scrollTop: 0 }, "smooth");
    }
  };

  const toggleMobileMenu = () => {
    $("nav ul").toggleClass("hidden");
  };

  $(document).ready(() => {
    // activate the first item by default
    activeHeaderItem($("nav ul li a").first());

    // add event listener to all items
    $("nav ul li a").on("click", function (e) {
      e.preventDefault();
      activeHeaderItem(this);
      $("nav ul").addClass("hidden");
    });

    // add event listener to mobile menu button
    $("header button").on("click", toggleMobileMenu);
  });
</script>
